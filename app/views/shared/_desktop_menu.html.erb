<!-- app/views/shared/_desktop_menu.html.erb -->

<nav class="bg-gray-800 m-0 border-t-0 border-transparent">

  <div class="flex items-center justify-between pl-4 py-0 m-0">

<!--    Left-aligned Main Menu Items - Always Visible-->
    <ul class="flex text-white">
      <li class="<%= current_page?(root_path) ? 'bg-red-500 p-4' : 'hover:bg-gray-700 p-4' %>">
        <%= link_to 'Home', root_path, class: 'block' %>
      </li>
      <li class="<%= current_page?(users_path) ? 'bg-red-500 p-4' : 'hover:bg-gray-700 p-4' %>">
        <%= link_to 'CRM Members', users_path, class: 'block' %>
      </li>
      <li class="<%= current_page?(tournaments_path) ? 'bg-red-500 p-4' : 'hover:bg-gray-700 p-4' %>">
        <%= link_to 'Tournaments', tournaments_path, class: 'block' %>
      </li>
    </ul>

<!--    Right-aligned Hamburger Menu for Profile/Authentication Links-->
<!--    Hamburger Icon & Hidden Checkbox-->
    <div class="ml-auto relative pr-4">
      <label for="user-menu-checkbox" class="cursor-pointer">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </label>
      <input type="checkbox" id="user-menu-checkbox" class="hidden peer">

<!--      Dropdown Menu controlled by the hidden checkbox-->
      <ul class="hidden absolute bg-gray-800 text-white flex-col peer-checked:flex z-20 mt-4 rounded-bl-lg w-max right-0" id="user-menu">

        <% if user_signed_in? %>
          <% if user_is_admin? %>
            <!-- Toggle button for Admin Section -->
            <li id="admin_menu_toggle_desktop" class="px-4 py-2 hover:bg-gray-700">
              <span class="flex items-center">
                <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16">
                  <g id="SVGRepo_bgCarrier" stroke-width="0" />
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />
                  <g id="SVGRepo_iconCarrier">
                    <path d="M4 7C4 6.44771 4.44772 6 5 6H24C24.5523 6 25 6.44771 25 7C25 7.55229 24.5523 8 24 8H5C4.44772 8 4 7.55229 4 7Z" fill="#FFFFFF" />
                    <path d="M4 13.9998C4 13.4475 4.44772 12.9997 5 12.9997L16 13C16.5523 13 17 13.4477 17 14C17 14.5523 16.5523 15 16 15L5 14.9998C4.44772 14.9998 4 14.552 4 13.9998Z" fill="#FFFFFF" />
                    <path d="M5 19.9998C4.44772 19.9998 4 20.4475 4 20.9998C4 21.552 4.44772 21.9997 5 21.9997H22C22.5523 21.9997 23 21.552 23 20.9998C23 20.4475 22.5523 19.9998 22 19.9998H5Z" fill="#FFFFFF" />
                  </g>
                </svg>
                <span class="text-white ml-2">Admin Section:</span>
              </span>
            </li>

            <!-- Admin Section -->
            <ul id="admin_menu_desktop" class="hidden bg-gray-800 text-white flex-col peer-checked:flex z-20 rounded-bl-lg w-max right-0 pl-6">
              <li class="<%= current_page?(admin_portal_path) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-6 py-2 lg:relative lg:bg-transparent lg:w-auto lg:p-2 <%= current_page?(admin_portal_path) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
                <%= link_to '- Admin Portal', admin_portal_path, class: 'block text-white' %>
              </li>
              <li class="<%= current_page?(tracks_path) || current_page?(new_track_path) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-6 py-2 lg:relative lg:bg-transparent lg:w-auto lg:p-2 <%= current_page?(tracks_path) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
                <%= link_to '- Tracks', tracks_path, class: 'block text-white' %>
              </li>
              <li class="<%= current_page?(leaderboards_path) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-6 py-2 lg:relative lg:bg-transparent lg:w-auto lg:p-2 <%= current_page?(leaderboards_path) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
                <%= link_to '- Leaderboards', leaderboards_path, class: 'block text-white' %>
              </li>
            </ul>
          <% end %>

          <!-- Toggle button for User Section -->
          <li id="user_menu_toggle_desktop" class="px-4 py-2 hover:bg-gray-700">
            <span class="flex items-center">
              <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" width="16" height="16">
                <g id="SVGRepo_bgCarrier" stroke-width="0" />
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />
                <g id="SVGRepo_iconCarrier">
                  <path d="M4 7C4 6.44771 4.44772 6 5 6H24C24.5523 6 25 6.44771 25 7C25 7.55229 24.5523 8 24 8H5C4.44772 8 4 7.55229 4 7Z" fill="#FFFFFF" />
                  <path d="M4 13.9998C4 13.4475 4.44772 12.9997 5 12.9997L16 13C16.5523 13 17 13.4477 17 14C17 14.5523 16.5523 15 16 15L5 14.9998C4.44772 14.9998 4 14.552 4 13.9998Z" fill="#FFFFFF" />
                  <path d="M5 19.9998C4.44772 19.9998 4 20.4475 4 20.9998C4 21.552 4.44772 21.9997 5 21.9997H22C22.5523 21.9997 23 21.552 23 20.9998C23 20.4475 22.5523 19.9998 22 19.9998H5Z" fill="#FFFFFF" />
                </g>
              </svg>
              <span class="text-white ml-2">User Section:</span>
            </span>
          </li>

          <!-- User Section -->
          <ul id="user_menu_desktop" class="hidden bg-gray-800 text-white flex-col peer-checked:flex z-20 rounded-bl-lg w-max right-0 pl-6">
            <li class="<%= current_page?(user_path(current_user)) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-6 py-2 lg:relative lg:bg-transparent lg:p-2 <%= current_page?(user_path(current_user)) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
              <%= link_to '- Profile', user_path(current_user), class: 'block text-white' %>
            </li>
            <li class="<%= current_page?(member_portal_path) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-6 py-2 lg:relative lg:bg-transparent lg:w-auto lg:p-2  <%= current_page?(member_portal_path) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
              <%= link_to '- Member Portal', member_portal_path, class: 'block text-white' %>
            </li>
          </ul>

          <li class="hover:bg-gray-700 px-4 py-2 lg:relative lg:bg-transparent lg:hover:text-gray-200">
            <%= link_to 'Sign Out', session_path, method: :delete, data: { confirm: "Are you sure you want to sign out?"}, class: 'block text-white' %>
          </li>
        <% else %>
          <li class="<%= current_page?(new_session_path) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-4 py-2 lg:relative lg:bg-transparent <%= current_page?(new_session_path) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
            <%= link_to 'Sign In', new_session_path, class: 'block text-white' %>
          </li>
          <li class="<%= current_page?(new_registration_path) ? 'bg-red-500' : 'hover:bg-gray-700' %> px-4 py-2 lg:relative lg:bg-transparent <%= current_page?(new_registration_path) ? 'lg:text-red-500' : 'lg:hover:text-gray-200' %>">
            <%= link_to 'Sign Up', new_registration_path, class: 'block text-white' %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</nav>
